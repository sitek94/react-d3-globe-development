(this.webpackJsonpglobe=this.webpackJsonpglobe||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var n=r(2),o=r.n(n),c=r(50),a=r.n(c),i=r(51);function s(e,t,r){return{country:e,countryHover:t,ocean:r}}var u=s("lightgreen","limegreen","dodgerblue"),l=s("darkorange","orangered","moccasin"),p=s("blueviolet","purple","plum"),d=s("dodgerblue","royalblue","lightblue"),j=s("#444","#222","#eee"),f=s("#eee","#aaa","#444");var b=r(9),v=r(3),h=r.n(v),m=r(29),g=r(16),y=r(54),O="https://unpkg.com/visionscarto-world-atlas@0.0.6/world/110m.json";function x(){return w.apply(this,arguments)}function w(){return(w=Object(g.a)(h.a.mark((function e(){var t,r,n,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O);case 2:return t=e.sent,e.next=5,t.json();case 5:if(r=e.sent,!(n=r.objects.countries)){e.next=12;break}return o=Object(y.a)(r,n),c=o.features,e.abrupt("return",c);case 12:throw new Error('There was no "countries" object in "topology.objects"');case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=r(6),S="https://gist.githubusercontent.com/sitek94/d1c99f4b1936ad047602cc569d30db6b/raw/1d11b02a553634ea708e36bc31557482a28cfac1/countries.csv",z={id:"unknown",name:"unknown",position:[25.027684437991375,-70.99627570018042]};function G(){return N.apply(this,arguments)}function N(){return(N=Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(k.a)(S).then((function(e){return e.map((function(e){var t=e.id,r=e.name,n=e.latitude,o=e.longitude;return t&&r&&n&&o?{id:t,name:r,position:[Number(n),Number(o)]}:z}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(g.a)(h.a.mark((function e(){var t,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([x(),G()]);case 2:return t=e.sent,r=Object(b.a)(t,2),n=r[0],o=r[1],e.abrupt("return",M(o,n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return t.map((function(t){var r=e.find((function(e){return e.id===t.id}));return Object(m.a)(Object(m.a)({},t),{},{properties:r||z})}))}function T(){var e=n.useState([]),t=Object(b.a)(e,2),r=t[0],o=t[1],c=n.useState("idle"),a=Object(b.a)(c,2),i=a[0],s=a[1],u=n.useState(null),l=Object(b.a)(u,2),p=l[0],d=l[1];return n.useEffect((function(){var e=!0;return s("pending"),function(){return E.apply(this,arguments)}().then((function(t){e&&(s("resolved"),o(t))})).catch((function(t){e&&(s("rejected"),d(t))})),function(){e=!1}}),[]),{countries:r,status:i,error:p}}var J=r(104);function R(e){var t=e.svgRef,r=e.countries,o=e.scale,c=e.cx,a=e.cy,i=e.rotateX,s=void 0===i?0:i,u=e.rotateY,l=void 0===u?0:u,p=e.rotateZ,d=void 0===p?0:p,j=e.rotation,f=void 0===j?[s,l,d]:j,v=e.dragSensitivity,h=void 0===v?75:v,m=e.minScroll,g=void 0===m?.3:m,y=e.maxScroll,O=void 0===y?20:y,x=n.useMemo((function(){return Object(k.b)().scale(o).center([0,0]).rotate(f).translate([c,a])}),[o,f,c,a]),w=n.useMemo((function(){return Object(k.c)(x)}),[x]);return n.useEffect((function(){if(t.current&&r.length){var e=Object(k.e)(t.current),n=e.selectAll("path"),c=e.select("circle"),a=n.data(r).join("path");e.call(function(e){var t=e.selection,r=e.projection,n=e.pathGenerator,o=e.sensitivity;return Object(J.a)().on("drag",(function(e){var c=r.rotate(),a=Object(b.a)(c,2),i=a[0],s=a[1],u=o/r.scale();r.rotate([i+e.dx*u,s-e.dy*u]),n.projection(r),t.attr("d",n)}))}({selection:a,pathGenerator:w,projection:x,sensitivity:h})).call(function(e){var t=e.selection,r=e.circleSelection,n=e.pathGenerator,o=e.projection,c=e.scale,a=e.minScroll,i=e.maxScroll;return Object(k.f)().on("zoom",(function(e){var s=e.transform.k;s>=i&&(s=i),s<=a?s=a:(o.scale(c*s),n.projection(o),r.attr("r",o.scale()),t.attr("d",n))}))}({selection:a,circleSelection:c,pathGenerator:w,projection:x,scale:o,minScroll:g,maxScroll:O})),c.attr("r",x.scale()),a.attr("d",w)}}),[t,o,O,g,x,r,w,h]),{rotateTo:function(e){t.current&&function(e){var t=e.selection,r=e.projection,n=e.pathGenerator,o=e.duration,c=void 0===o?1e3:o,a=e.rotation,i=r.rotate();n.projection(r);var s=a,u=Object(k.d)(i,s);t.transition().attrTween("d",(function(e){return function(t){r.rotate(u(Math.pow(t,.33))),n.projection(r);var o=n(e);return null!==o?o:""}})).duration(c)}({selection:Object(k.e)(t.current).selectAll("path"),projection:x,pathGenerator:w,rotation:e})}}}var A=r(0),C=0;function H(e){C++;var t=e.colors,r=e.size,o=void 0===r?400:r,c=o,a=o,s=c/2,l=a/2,p=o/2,d=n.useRef(null),j=T().countries,f=R({cx:s,cy:l,scale:o/2,svgRef:d,countries:j}).rotateTo,b="".concat(i.name,"-").concat(C),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=t.country,n=t.countryHover,o=t.ocean;return"\n    .".concat(e," .country {\n      fill: ").concat(r,";\n      stroke: ").concat(r,";\n    }\n    .").concat(e," .country:hover {\n      fill: ").concat(n,";\n      stroke: ").concat(n,";\n    }\n    .").concat(e," .ocean {\n      fill: ").concat(o,";\n    }\n  ")}(b,t);return Object(A.jsxs)("svg",{ref:d,width:c,height:a,className:b,children:[Object(A.jsx)("style",{children:v}),Object(A.jsx)("circle",{cx:s,cy:l,r:p,className:"ocean"}),j.map((function(e){return Object(A.jsxs)("g",{children:[Object(A.jsx)("title",{children:e.properties.name}),Object(A.jsx)("path",{className:"country",onClick:function(){return function(e){f(e.properties.position),console.log(e.properties)}(e)}})]},e.id)}))]})}var B=function(){return Object(A.jsxs)("div",{children:[Object(A.jsx)(H,{size:500}),Object(A.jsx)(H,{colors:l,size:450}),Object(A.jsx)(H,{colors:p,size:375}),Object(A.jsx)(H,{colors:f,size:450}),Object(A.jsx)(H,{colors:d,size:400}),Object(A.jsx)(H,{colors:j,size:300})]})};a.a.render(Object(A.jsx)(o.a.StrictMode,{children:Object(A.jsx)(B,{})}),document.getElementById("root"))},51:function(e){e.exports=JSON.parse('{"name":"globe","version":"0.1.0","private":true,"dependencies":{"d3":"^6.7.0","react":"^17.0.2","react-dom":"^17.0.2","react-scripts":"4.0.3","topojson-client":"^3.1.0"},"devDependencies":{"@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/d3":"^6.3.0","@types/geojson":"^7946.0.7","@types/jest":"^26.0.15","@types/node":"^12.0.0","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","@types/react-test-renderer":"^17.0.1","@types/topojson-client":"^3.1.0","@types/topojson-specification":"^1.0.1","gh-pages":"^3.1.0","typescript":"^4.1.2"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"homepage":"https://sitek94.github.io/react-d3-globe-development"}')}},[[102,1,2]]]);
//# sourceMappingURL=main.0fbd6c6c.chunk.js.map